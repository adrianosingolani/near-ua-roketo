{"version":3,"sources":["nearEnv.js","utils.js","components/Header.js","components/Video.js","components/Chat.js","components/Users.js","components/ChatTabs.js","components/Room.js","App.js","reportWebVitals.js","index.js"],"names":["ROKETO_ACCOUNT","WRAP_ACCOUNT","DAPP_ACCOUNT","getNearEnv","walletConnection","nearEnv","env","networkId","nodeUrl","roketoContract","wrapContract","dappContract","walletUrl","helperUrl","explorerUrl","Error","a","keyStore","keyStores","BrowserLocalStorageKeyStore","connect","near","WalletConnection","accountId","getAccountId","Contract","account","viewMethods","changeMethods","Header","useState","balance","setBalance","useEffect","ft_balance_of","account_id","then","catch","err","console","log","Box","sx","flexGrow","AppBar","position","Toolbar","Typography","variant","component","style","display","flexDirection","textAlign","formatNearAmount","Button","marginLeft","color","onClick","signOut","window","location","reload","requestSignIn","modalStyle","top","left","transform","width","bgcolor","border","boxShadow","p","Video","videoReady","setVideoReady","React","open","setOpen","playerRef","useRef","fireOnVideoCanPlay","fireOnVideoStalled","fireOnVideoEnded","fireOnVideoPlay","fireOnVideoPause","player","current","addEventListener","removeEventListener","Grid","container","spacing","item","xs","aspectRatio","src","controls","muted","Modal","disableEscapeKeyDown","id","mt","paragraph","BOATLOAD_OF_GAS","Big","times","toFixed","Chat","chatBottom","chatMessages","setChatMessages","getMessages","messages","scrollIntoView","height","borderRadius","padding","List","overflow","map","message","index","ListItem","alignItems","ListItemAvatar","Avatar","alt","user","ListItemText","primary","secondary","ref","TextField","placeholder","autoFocus","onKeyPress","e","key","target","value","sendMessage","marginTop","chatUsers","Users","TabPanel","props","children","other","role","hidden","paddingTop","a11yProps","ChatTabs","setValue","borderBottom","borderColor","Tabs","onChange","event","newValue","Tab","minHeight","icon","iconPosition","label","wrapped","disableRipple","GridItem","styled","Paper","theme","backgroundColor","palette","mode","typography","body2","text","Room","App","className","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","darkTheme","createTheme","components","MuiButton","styleOverrides","root","margin","nearInitPromise","initializeContract","ReactDOM","createRoot","document","getElementById","render","StrictMode","ThemeProvider","CssBaseline","error"],"mappings":"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","file":"static/js/main.f4d46891.chunk.js","sourcesContent":["const ROKETO_ACCOUNT = 'streaming-r-v2.dcversus.testnet';\nconst WRAP_ACCOUNT = 'wrap.testnet'\nconst DAPP_ACCOUNT = 'streaming-ua.testnet';\n\nfunction getNearEnv(env) {\n  switch (env) {\n    case 'mainnet': \n      return {\n        networkId: 'mainnet',\n        nodeUrl: 'https://rpc.mainnet.near.org',\n        roketoContract: ROKETO_ACCOUNT,\n        wrapContract: WRAP_ACCOUNT,\n        dappContract: DAPP_ACCOUNT,\n        walletUrl: 'https://wallet.near.org',\n        helperUrl: 'https://helper.mainnet.near.org',\n        explorerUrl: 'https://explorer.mainnet.near.org',\n      };\n    case 'testnet': \n      return {\n        networkId: 'testnet',\n        nodeUrl: 'https://rpc.testnet.near.org',\n        roketoContract: ROKETO_ACCOUNT,\n        wrapContract: WRAP_ACCOUNT,\n        dappContract: DAPP_ACCOUNT,\n        walletUrl: 'https://wallet.testnet.near.org',\n        helperUrl: 'https://helper.testnet.near.org',\n        explorerUrl: 'https://explorer.testnet.near.org',\n      };\n    default:\n      throw Error(`Unknown environment \"${env}\".`);\n  }\n}\n\nexport default getNearEnv;","import { connect, Contract, keyStores, WalletConnection } from 'near-api-js';\n// import { formatNearAmount } from 'near-api-js/lib/utils/format';\nimport getNearEnv from './nearEnv';\n\n// get network configuration values\nconst nearEnv = getNearEnv('testnet');\n\nlet walletConnection;\n\nexport async function initializeContract() {\n  // create a keyStore for signing transactions using the user's key\n  // which is located in the browser local storage after user logs in\n  const keyStore = new keyStores.BrowserLocalStorageKeyStore();\n\n  // Initializing connection to the NEAR testnet\n  const near = await connect({ keyStore, ...nearEnv });\n  \n  // Initialize wallet connection\n  walletConnection = new WalletConnection(near);\n\n  // Load in user's account data\n  const accountId = walletConnection.getAccountId();\n\n  const roketoContract = new Contract(\n    walletConnection.account(),\n    nearEnv.roketoContract,\n    {\n      viewMethods: ['get_stream', 'get_account', 'get_account_incoming_streams', 'get_account_outgoing_streams', 'get_stats'],\n      changeMethods: ['start_stream', 'pause_stream', 'stop_stream', 'withdraw'],\n    }\n  );\n\n  const wrapContract = new Contract(\n    walletConnection.account(),\n    nearEnv.wrapContract,\n    {\n      viewMethods: ['ft_balance_of'],\n      changeMethods: ['near_deposit', 'ft_transfer_call', 'ft_transfer'],\n    }\n  );\n\n  const dappContract = new Contract(\n    walletConnection.account(),\n    nearEnv.dappContract,\n    {\n      viewMethods: ['getMessages'],\n      changeMethods: ['sendMessage'],\n    }\n  );\n\n  return { walletConnection, accountId, nearEnv, roketoContract, wrapContract, dappContract };\n}\n\n// export async function accountBalance() {\n//   return formatNearAmount(\n//     (await walletConnection.account().getAccountBalance()).total,\n//     2\n//   );\n// }\n\nexport async function getAccountId() {\n  return walletConnection.getAccountId();\n}\n\nexport function login() {\n  walletConnection.requestSignIn(nearEnv.dappContract);\n}\n\nexport function logout() {\n  walletConnection.signOut();\n  window.location.reload();\n}","import React, { useEffect, useState } from 'react';\nimport { formatNearAmount } from 'near-api-js/lib/utils/format';\n\nimport { login, logout } from \"../utils\";\n\nimport {\n  AppBar,\n  Box,\n  Toolbar,\n  Typography,\n  Button\n} from '@mui/material/';\n\nexport default function Header({ walletConnection, accountId, wrapContract }) {\n  const account = walletConnection.account();\n\n  const [balance, setBalance] = useState(0)\n\n  useEffect(() => {\n    if (accountId && wrapContract) {\n      wrapContract.ft_balance_of({\n        account_id: `${accountId}`,\n      })\n        .then(balance => {\n          setBalance(balance);\n        })\n        .catch(err => {\n          console.log(err);\n        });\n    }\n  }, [accountId, wrapContract]);\n\n  return (\n    <Box sx={{ flexGrow: 1 }}>\n      <AppBar position=\"fixed\">\n        <Toolbar>\n          <Typography variant=\"h6\" component=\"div\" sx={{ flexGrow: 1 }}>\n            Live for Ukraine\n          </Typography>\n          {account.accountId ? (\n            <>\n              <Box style={{display: 'flex', flexDirection: 'column', textAlign: 'right'}}>\n                <Typography variant=\"subtitle2\">\n                  {account.accountId}\n                </Typography>\n                <Typography variant=\"subtitle2\">\n                  {formatNearAmount(balance, 4)} wNEAR\n                </Typography>\n              </Box>\n              <Button sx={{ marginLeft: 2 }} variant=\"outlined\" color=\"inherit\" onClick={() => logout()}>Logout</Button>\n            </>\n          ) : (\n            <Button color=\"inherit\" onClick={() => login()}>Login</Button>\n          )}\n        </Toolbar>\n      </AppBar>\n    </Box>\n  );\n}","import React, { useRef, useEffect, useState } from 'react';\nimport ReactHlsPlayer from 'react-hls-player';\nimport { parseNearAmount } from 'near-api-js/lib/utils/format';\nimport Big from 'big.js';\n\nimport {\n  Box,\n  Grid,\n  Modal,\n  Typography,\n  Button\n} from '@mui/material';\n\nconst modalStyle = {\n  position: 'absolute',\n  top: '50%',\n  left: '50%',\n  transform: 'translate(-50%, -50%)',\n  width: '50%',\n  bgcolor: 'background.paper',\n  border: '2px solid #000',\n  boxShadow: 24,\n  p: 10,\n};\n\nconst streamingUrl = 'https://76c240504080.us-east-1.playback.live-video.net/api/video/v1/us-east-1.395008664088.channel.wvTsdEmLB8rk.m3u8';\n\nexport default function Video({ wrapContract, roketoContract, dappContract, accountId }) {\n  const [videoReady, setVideoReady] = useState(false);\n  const [paymentStream, setPaymentStream] = useState(null);\n\n  //modal\n  const [open, setOpen] = React.useState(true);\n  // const handleOpen = () => setOpen(true);\n  // const handleClose = (e, r) => {\n  //   console.log(r);\n\n  //   setOpen(false);\n  // }\n\n  const playerRef = useRef();\n\n  const createStream = (settings) => {\n    const pricePerHour = parseNearAmount(settings.price.toString());\n    const pricePerMinute = Big(pricePerHour).div(60).toFixed(0);\n    const pricePerSecond = Big(pricePerHour).div(3600).toFixed(0);\n\n    const amountToPay = Big(pricePerMinute).times(settings.minutes).toFixed(0);\n\n    const args = {\n      receiver_id: roketoContract,\n      amount: amountToPay,\n      memo: 'memo',\n      msg: JSON.stringify({\n        Create: {\n          request: {\n            owner_id: accountId,\n            receiver_id: dappContract,\n            tokens_per_sec: parseInt(pricePerSecond),\n            description: ''\n          },\n        },\n      })\n    }\n\n    wrapContract.ft_transfer_call(\n      args,\n      300000000000000,\n      1\n    )\n      .then(res => {\n        console.log(res);\n      })\n      .catch(err => {\n        console.log(err);\n      })\n  }\n\n  //canplay\n  function fireOnVideoCanPlay() {\n    console.log('canplay');\n\n    setVideoReady(true);\n  }\n\n  //stalled\n  function fireOnVideoStalled() {\n    console.log('stalled');\n\n    setVideoReady(false);\n    fireOnVideoEnded();\n  }\n\n  //play\n  function fireOnVideoPlay() {\n    console.log('play');\n  }\n\n  //pause\n  function fireOnVideoPause() {\n    console.log('pause');\n  }\n\n  //ended\n  function fireOnVideoEnded() {\n    console.log('ended');\n  }\n\n  useEffect(() => {\n    const player = playerRef;\n\n    player.current.addEventListener('canplay', fireOnVideoCanPlay);\n    player.current.addEventListener('stalled', fireOnVideoStalled);\n\n    player.current.addEventListener('play', fireOnVideoPlay);\n    player.current.addEventListener('pause', fireOnVideoPause);\n    player.current.addEventListener('ended', fireOnVideoEnded);\n\n    return () => {\n      player.current.removeEventListener('canplay', fireOnVideoCanPlay);\n      player.current.removeEventListener('stalled', fireOnVideoStalled);\n\n      player.current.removeEventListener('play', fireOnVideoPlay);\n      player.current.removeEventListener('pause', fireOnVideoPause);\n      player.current.removeEventListener('ended', fireOnVideoEnded);\n    }\n  }, []);\n\n  return (\n    <>\n      <Box sx={{ flexGrow: 1 }}>\n        <Grid container spacing={1}>\n          <Grid item xs={12}>\n            <Box sx={{\n              display: 'flex',\n              aspectRatio: '16 / 9'\n            }}>\n              <ReactHlsPlayer\n                playerRef={playerRef}\n                src={streamingUrl}\n                controls\n                muted\n                width=\"100%\"\n              />\n            </Box>\n          </Grid>\n        </Grid>\n      </Box>\n      <Modal\n        open={open}\n        // onClose={(e, r) => handleClose(e, r)}\n        aria-labelledby=\"modal-modal-title\"\n        aria-describedby=\"modal-modal-description\"\n        disableEscapeKeyDown\n      >\n        <Box sx={modalStyle}>\n          {\n            videoReady ? (\n              <Box sx={{ display: 'flex', flexDirection:'column' }}>\n                <Typography id=\"modal-modal-title\" variant=\"h6\">\n                  Streaming is live!\n                </Typography>\n                <Typography id=\"modal-modal-description\" sx={{ mt: 2 }} paragraph>\n                  If you want to watch and donate, click on the button bellow and you will be asked to approve the payment.\n                </Typography>\n                <Typography variant=\"subtitle2\" paragraph>\n                  * You will need wNEAR for it.\n                </Typography>\n                <Button \n                  variant='contained'\n                  // onClick={() => createStream({\n                  //   price: 3,\n                  //   minutes: 1\n                  // })}\n                  onClick={() => {\n                    setOpen(false);\n                  }}\n                >\n                  Watch and donate\n                </Button>\n              </Box>\n            ) : (\n              <>\n                <Typography id=\"modal-modal-title\" variant=\"h6\" component=\"h2\">\n                  Waiting for the streaming to be ready.\n                </Typography>\n              </>\n            )\n          }\n        </Box>\n      </Modal>\n    </>\n  )\n}","import React, { useRef, useEffect, useState } from 'react';\nimport Big from 'big.js';\n\nimport {\n  Box,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  Avatar,\n  Typography,\n  TextField\n} from '@mui/material';\n\nconst BOATLOAD_OF_GAS = Big(3).times(10 ** 13).toFixed();\n\nexport default function Chat({ dappContract }) {\n  const chatBottom = useRef(null);\n\n  const [chatMessages, setChatMessages] = useState([]);\n\n  const sendMessage = (message) => {\n\n    dappContract.sendMessage(\n      { message: message },\n      BOATLOAD_OF_GAS,\n      '0'\n    )\n      .then(() => {\n        getMessages();\n      })\n      .catch(err => {\n        console.log(err);\n      })\n  }\n\n  const getMessages = () => {\n    dappContract.getMessages()\n      .then(messages => {\n        setChatMessages([...messages]);\n\n        chatBottom.current.scrollIntoView();\n      })\n      .catch(err => {\n        console.log(err);\n      })\n  }\n\n  useEffect(() => {\n    getMessages();\n  }, [])\n\n  useEffect(() => {\n    chatBottom.current.scrollIntoView();\n  }, [chatMessages])\n\n  return (\n    <Box sx={\n      {\n        width: '100%',\n        height: '100%',\n        bgcolor: 'background.paper',\n        borderRadius: '4px',\n        padding: 1,\n        display: 'flex',\n        flexDirection: 'column'\n      }\n    }>\n      <List sx={{ overflow: 'scroll', padding: 0 }}>\n        {\n          chatMessages.map((message, index) => {\n            return (\n              <ListItem key={index} alignItems='flex-start' sx={{ padding: '0 8px 16px' }}>\n                <ListItemAvatar>\n                  <Avatar alt={message.user} />\n                </ListItemAvatar>\n                <ListItemText\n                  primary={\n                    <Typography variant='subtitle2'>\n                      {message.user}\n                    </Typography>\n                  }\n                  secondary={\n                    <Typography variant='body2'>\n                      {message.message}\n                    </Typography>\n                  }\n                />\n              </ListItem>\n            )\n          })\n        }\n        <ListItem ref={chatBottom} />\n      </List>\n      <TextField\n        variant='outlined'\n        placeholder='Type your message'\n        autoFocus\n        onKeyPress={(e) => {\n          if (e.key === \"Enter\") {\n            sendMessage(e.target.value);\n            e.target.value = '';\n          }\n        }}\n        sx={{ marginTop: 'auto' }}\n      />\n    </Box>\n  )\n}","import React from 'react';\n\nimport {\n  List,\n  ListItem,\n  ListItemText,\n} from '@mui/material';\n\nconst chatUsers = [\n]\n\nexport default function Users() {\n  return (\n    <List sx={{ width: '100%', bgcolor: 'background.paper' }}>\n      {\n        chatUsers.map((user, index) => {\n          return (\n            <ListItem key={index} alignItems=\"flex-start\">\n              <ListItemText primary={user} />\n            </ListItem>\n          )\n        })\n      }\n    </List>\n  )\n}\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport PeopleIcon from '@mui/icons-material/People';\nimport ChatIcon from '@mui/icons-material/Chat';\nimport {\n  Box,\n  Tabs,\n  Tab,\n} from '@mui/material';\n\nimport Chat from './Chat';\nimport Users from './Users';\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <Box\n      role='tabpanel'\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && (\n        <Box sx={{ paddingTop: 2, height: '100%' }}>{children}</Box>\n      )}\n    </Box>\n  );\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.number.isRequired,\n  value: PropTypes.number.isRequired,\n};\n\nfunction a11yProps(index) {\n  return {\n    id: `simple-tab-${index}`,\n    'aria-controls': `simple-tabpanel-${index}`,\n  };\n}\n\nexport default function ChatTabs({ dappContract }) {\n  const [value, setValue] = useState(1);\n\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n  return (\n    <Box sx={{ width: '100%', height: '100%', display: 'flex', flexDirection: 'column' }}>\n      <Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\n        <Tabs value={value} onChange={handleChange} aria-label='Chat tab'>\n          <Tab\n            sx={{ minHeight: 'fit-content' }}\n            icon={<PeopleIcon />} iconPosition='start'\n            label='Users'\n            {...a11yProps(0)}\n            wrapped\n            disableRipple\n          />\n          <Tab\n            sx={{ minHeight: 'fit-content' }}\n            icon={<ChatIcon />} iconPosition='start'\n            label='Chat'\n            {...a11yProps(1)}\n            wrapped\n            disableRipple\n          />\n        </Tabs>\n      </Box>\n      <Box sx={{ height: '100%', overflow: 'hidden' }}>\n        <TabPanel value={value} index={0}>\n          <Users />\n        </TabPanel>\n        <TabPanel value={value} index={1} sx={{ height: '100%' }}>\n          <Chat \n            dappContract={dappContract}\n          />\n        </TabPanel>\n      </Box>\n    </Box>\n  )\n}","import React from 'react';\n\nimport { styled } from '@mui/material/styles';\nimport {\n  Box,\n  Grid,\n  Paper\n} from '@mui/material';\n\nimport Video from './Video';\nimport ChatTabs from './ChatTabs';\n\nconst GridItem = styled(Paper)(({ theme }) => ({\n  backgroundColor: theme.palette.mode === 'dark' ? '#1A2027' : '#fff',\n  ...theme.typography.body2,\n  padding: theme.spacing(1),\n  textAlign: 'center',\n  color: theme.palette.text.secondary,\n  border: '1px solid #EEE'\n}));\n\nfunction Room({ wrapContract, dappContract, roketoContract, accountId }) {\n  return (\n    <Box sx={{ height: '100%' }}>\n      <Grid container spacing={2} sx={{ height: '100%', padding: '16px 16px 0' }}>\n        <Grid item xs={8}>\n          <GridItem>\n            <Video\n\n            />\n          </GridItem>\n        </Grid>\n        <Grid item xs={4} sx={{ height: '100%' }}>\n          <GridItem sx={{ height: '100%' }}>\n            <ChatTabs\n              dappContract={dappContract}\n              roketoContract={roketoContract}\n              accountId={accountId}\n              wrapContract={wrapContract}\n            />\n          </GridItem>\n        </Grid>\n      </Grid>\n    </Box>\n  )\n}\n\nexport default Room;","import React from \"react\";\n\nimport Header from './components/Header';\nimport Room from \"./components/Room\";\n\nimport { Box } from \"@mui/material\";\n\nfunction App({ walletConnection, accountId, nearEnv, roketoContract, wrapContract, dappContract }) {\n  return (\n    <Box className=\"App\" sx={{ height: '100%' }}>\n      <Header\n        walletConnection={walletConnection}\n        accountId={accountId}\n        wrapContract={wrapContract}\n      />\n      <Box style={{ paddingTop: '4em', height: '100%' }}>\n        <Room \n          walletConnection={walletConnection}\n          dappContract={dappContract}\n          roketoContract={roketoContract}\n          accountId={accountId}\n          wrapContract={wrapContract}\n        />\n      </Box>\n    </Box>\n  );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nimport { CssBaseline } from \"@mui/material\";\nimport { ThemeProvider, createTheme } from '@mui/material/styles';\n\nimport { initializeContract } from \"./utils\";\n\nconst darkTheme = createTheme({\n  palette: {\n    mode: 'light',\n  },\n  components: {\n    // Name of the component\n    MuiButton: {\n      styleOverrides: {\n        // Name of the slot\n        root: {\n          // Some CSS\n          margin: '8px',\n        },\n      },\n    },\n  },\n});\n\nwindow.nearInitPromise = initializeContract()\n  .then(({ walletConnection, accountId, nearEnv, roketoContract, wrapContract, dappContract }) => {\n    const root = ReactDOM.createRoot(document.getElementById('root'));\n    root.render(\n      <React.StrictMode>\n        <ThemeProvider theme={darkTheme}>\n          <CssBaseline />\n          <App \n            walletConnection={walletConnection}\n            accountId={accountId}\n            nearEnv={nearEnv}\n            roketoContract={roketoContract}\n            wrapContract={wrapContract}\n            dappContract={dappContract}\n          />\n        </ThemeProvider>\n      </React.StrictMode>\n    );\n  })\n  .catch(console.error);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();"],"sourceRoot":""}